# ğŸ€„ å¡äº”æ˜Ÿéº»å°†è®­ç»ƒ AIï¼šæŠ€æœ¯å®ç°ä¸é€»è¾‘è§„èŒƒæ–‡æ¡£ (TS ç‰ˆ)

## 1. å¡äº”æ˜Ÿéº»å°†æ ¸å¿ƒè§„åˆ™è¯´æ˜ (The Rules)

â€œå¡äº”æ˜Ÿâ€èµ·æºäºæ¹–åŒ—è¥„é˜³ï¼Œæ˜¯ä¸€ç§ä¸‰äººéº»å°†ç©æ³•ã€‚å®ƒçš„æ ¸å¿ƒç‰¹è‰²åœ¨äº**ç‰Œå°‘ã€èŠ‚å¥å¿«ã€ç•ªæ•°å¤§ã€åªèƒ½ç¢°æ ä¸èƒ½åƒ**ã€‚

- **ç‰Œåº“ç²¾ç®€**ï¼šå»æ‰æ‰€æœ‰ä¸‡å­—ã€é£å‘ç‰Œï¼ˆä¸œå—è¥¿åŒ—ï¼‰ï¼Œåªä¿ç•™**ç­’ï¼ˆ1-9ï¼‰**ã€**æ¡ï¼ˆ1-9ï¼‰**ã€**ä¸­å‘ç™½**ï¼Œå…±è®¡ **84 å¼ ç‰Œ**ã€‚
- **ä¸‰äººæ¸¸æˆ**ï¼šæ²¡æœ‰å‘ç‰Œçš„â€œåŒ—é£â€ä½ï¼Œåªæœ‰ä¸‰ä¸ªäººç©ã€‚
- **åŠ¨ä½œé™åˆ¶**ï¼š**ä¸èƒ½â€œåƒâ€ç‰Œ**ã€‚åªèƒ½é è‡ªå·±æ‘¸é¡ºå­ï¼Œæˆ–è€…ç¢°ç‰Œï¼ˆç¢°ï¼‰ã€æ ç‰Œï¼ˆæ˜æ /æš—æ /è¡¥æ ï¼‰ã€‚
- **äº®å€’ (Liang Dao)**ï¼šå¬ç‰Œåï¼Œç©å®¶å¯ä»¥é€‰æ‹©â€œäº®å€’â€ï¼ˆå…¬å¼€æ‰‹ç‰Œï¼‰ã€‚äº®å€’åç©å®¶ä¸èƒ½æ¢ç‰Œï¼Œåªèƒ½æ‘¸æ‰“ï¼ˆæ‘¸ä»€ä¹ˆæ‰“ä»€ä¹ˆï¼‰ï¼Œé™¤éå¯ä»¥èƒ¡ç‰Œæˆ–è€…åœ¨ä¸æ”¹å˜å¬ç‰Œå£çš„å‰æä¸‹æ ç‰Œã€‚äº®å€’èƒ¡ç‰Œç•ªæ•°ç¿»å€ã€‚
- **å¡äº”æ˜Ÿä¸“æœ‰ç•ªå‹**ï¼šæ‰‹é‡Œæœ‰ 4ã€6 ç­’/æ¡ï¼Œå¬ 5 ç­’/æ¡ï¼Œå¹¶ä¸”æœ€ç»ˆèƒ¡ 5 ç­’/æ¡ï¼Œå³ä¸ºâ€œå¡äº”æ˜Ÿâ€ï¼ˆé€šå¸¸ä¸º 2 ç•ªæˆ–ç›´æ¥ç¿»å€ï¼‰ã€‚æ³¨æ„ï¼šå¦‚æœæ˜¯ 4556 å¬ 5ï¼Œæˆ–è€… 34567 å¬ 5ï¼Œéƒ¨åˆ†è§„åˆ™ä¸‹ä¸ç®—æ­£å®—å¡äº”æ˜Ÿï¼Œéœ€æ ¹æ®å…·ä½“æœ¬åœ°è§„åˆ™é…ç½®ã€‚
- **æ ç‰Œå³æ—¶ç»“ç®—**ï¼šæ˜æ ã€æš—æ åœ¨æ‰“å‡ºæ—¶å°±ä¼šç«‹åˆ»æ”¶é’±ï¼ˆä¸ç®¡æœ€åæ˜¯å¦èƒ¡ç‰Œï¼‰ï¼Œæ‰€ä»¥æ ç‰Œæ”¶ç›Šæé«˜ï¼ŒAIæ•™å¯¼æ—¶åº”æå…¶é¼“åŠ±æ ç‰Œã€‚

---

## 2. æ ¸å¿ƒæ•°æ®æ¨¡å‹ (TypeScript Interfaces)

ä¸ºäº†æ”¯æŒå¡äº”æ˜Ÿçš„ç‰¹æ®Šé€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åŸºç¡€æ•°æ®ç»“æ„ä¸Šè¿›è¡Œæ‰©å……ï¼š

```typescript
// å®šä¹‰ç‰Œç»„ï¼š1-9ç­’ (DOT), 1-9æ¡ (BAM), ä¸­å‘ç™½ (DRG)
export type TileType = "DOT" | "BAM" | "DRG";

export interface Tile {
  type: TileType;
  value: number; // 1-9; DRG: 1(ä¸­), 2(å‘), 3(ç™½)
  id: string; // å”¯ä¸€æ ‡è¯†ï¼Œæ–¹ä¾¿å‰ç«¯æ¸²æŸ“
}

// ç©å®¶å¯é€‰çš„æ“ä½œåŠ¨ä½œ
export type ActionType = "DISCARD" | "PUNG" | "KONG" | "LIANG_DAO" | "HU";

export interface TrainingSession {
  hand: Tile[]; // å½“å‰æ‰‹ç‰Œ
  discarded: Tile[]; // ç©å®¶æ‰“å‡ºçš„ç‰Œ
  isLiangDao: boolean; // ç©å®¶æ˜¯å¦å¤„äºâ€œäº®å€’â€çŠ¶æ€
  availableActions: ActionType[]; // ç©å®¶å½“å‰å¯æ‰§è¡Œçš„åˆæ³•åŠ¨ä½œ

  // å¼•æ“è®¡ç®—å‡ºçš„æœ€ä¼˜å†³ç­–
  recommendedAction: ActionType;
  recommendedTile?: Tile; // å¦‚æœæ˜¯ DISCARDï¼Œæ¨èæ‰“å“ªå¼ 

  shanten: number; // å‘å¬æ•° (å½“å‰è·ç¦»èƒ¡ç‰Œè¿˜å·®å‡ å¼ )
  responseTime: number; // ç©å®¶æ€è€ƒè€—æ—¶ (ms)

  // å¡äº”æ˜Ÿä¸“å±åˆ¤å®šæ ‡è¯†
  hasKaWuXingPotential: boolean; // æ˜¯å¦å…·å¤‡â€œå¡äº”æ˜Ÿâ€æ½œåŠ›
  canLiangDao: boolean; // å½“å‰æ˜¯å¦æ»¡è¶³â€œäº®å€’â€æ¡ä»¶ï¼ˆéœ€è¾¾åˆ°å¬ç‰ŒçŠ¶æ€ shanten === 0ï¼‰
}
```

---

## 3. æ ¸å¿ƒé€»è¾‘æµä¸ç®—æ³•é€‚é… (Logic Flow & Engine)

åœ¨ Antigravity/TS ä¸­å®ç°å¡äº”æ˜Ÿä¸“æœ‰é€»è¾‘çš„æ­¥éª¤ï¼š

1. **ç”Ÿæˆå¯¹å±€ (Generator)**
   - ä» 84 å¼ ç‰Œæ± ä¸­æŠ½å– 13 å¼ ç»™ç©å®¶ã€‚
   - **è¿›é˜¶**ï¼šä¸ºäº†è®­ç»ƒä»·å€¼ï¼ŒAI åº”å½“ç”Ÿæˆ**1å‘å¬**æˆ–**2å‘å¬**çš„æ®‹å±€ï¼Œå¹¶æ¨¡æ‹Ÿå…¶ä»–ä¸¤å®¶å·²ç»æ‰“å‡ºéƒ¨åˆ†ç‰Œçš„å¼ƒç‰Œå †ï¼ˆå½±å“ç©å®¶åˆ¤æ–­å‰©ä½™è¿›å¼ æ•°ï¼‰ã€‚

2. **å¼•æ“å‘å¬æ•°ä¸ç‰Œæ•ˆç®—æ³•é€‚é… (Shanten & Efficiency)**
   - **æƒé‡ä¿®æ­£**ï¼šç”±äºâ€œä¸èƒ½åƒç‰Œâ€ï¼Œé¡ºå­ï¼ˆSequenceï¼‰åªèƒ½é è‡ªæ‘¸ã€‚å› æ­¤å¼•æ“åœ¨è®¡ç®—æœ€å¤§è¿›å¼ æ•°ï¼ˆOutsï¼‰æ—¶ï¼Œå¿…é¡»ç»™å¯¹å­ï¼ˆPairï¼‰å’Œåˆ»å­ï¼ˆTripletï¼‰èµ‹äºˆæ›´é«˜çš„æœŸæœ›å€¼å®¹å¿åº¦ã€‚
   - **å¤§ç‰Œå¯¼å‘**ï¼šä¸­å‘ç™½æå…¶å®¹æ˜“å½¢æˆâ€œå°ä¸‰å…ƒ/å¤§ä¸‰å…ƒâ€ï¼Œä¸”â€œå¡å¤¹äº”â€è‡ªå¸¦ç¿»å€ã€‚å¼•æ“è®¡ç®— `recommendedTile` æ—¶ï¼Œä¸ä»…ä»…çœ‹è¿›å¼ æ¦‚ç‡ï¼Œè¿˜åº”åŠ å…¥**æœŸæœ›ç•ªæ•° (Expected Value, EV)**ï¼Œå³ `è¿›å¼ æ¦‚ç‡ Ã— é¢„æœŸç•ªæ•°`ã€‚

3. **äº®å€’çŠ¶æ€é”å®š (Liang Dao Lock)**
   - å¦‚æœç©å®¶é€‰æ‹©äº† `LIANG_DAO`ï¼Œç³»ç»Ÿéœ€è‡ªåŠ¨æ¥ç®¡åç»­æŠ½ç‰Œï¼šå¦‚æœä¸æ˜¯è¿›å¼ ç‰Œç›´æ¥è‡ªåŠ¨æ‰“å‡ºï¼Œç›´åˆ°æ‘¸åˆ°èƒ¡ç‰Œæˆ–åˆæ³•æ ç‰Œã€‚

---

## 4. Claude Agent ç³»ç»Ÿæç¤ºè¯ (The Brain)

å¡äº”æ˜Ÿçš„æ•™ç»ƒä¸ä»…è¦æ‡‚ç‰Œæ•ˆï¼Œè¿˜è¦æ·±è°™æ¹–åŒ—å½“åœ°æ‰“ç‰Œçš„æ¿€è¿›é£æ ¼ã€‚

### System Prompt

> ä½ æ˜¯ä¸€ä½æåº¦ç¡¬æ ¸ä¸”æ¯’èˆŒçš„â€œæ¹–åŒ—è¥„é˜³å¡äº”æ˜Ÿâ€éº»å°†åŸæ•™æ—¨ä¸»ä¹‰æ•™ç»ƒã€‚
>
> **ä½ çš„ä»»åŠ¡ï¼š**
> æ ¹æ®åå°å¼•æ“æä¾›çš„ JSON æ•°æ®ï¼ˆåŒ…å«ï¼šç©å®¶æ‰‹ç‰Œã€ç©å®¶åŠ¨ä½œã€æœ€ä¼˜åŠ¨ä½œã€å‘å¬æ•°ã€å“åº”æ—¶é—´ã€äº®å€’çŠ¶æ€ï¼‰ï¼Œå¯¹ç©å®¶è¿›è¡Œç‚¹è¯„ã€‚
>
> **ç‚¹è¯„å‡†åˆ™ï¼š**
>
> 1. **å¡äº”æ˜Ÿæ‰§å¿µ**ï¼šæ‰‹é‡Œæœ‰4ã€6æ¡ï¼Œæ˜æ˜å¯ä»¥ç­‰5æ¡åšâ€œå¡äº”æ˜Ÿâ€ï¼ˆç¿»å€ï¼‰ï¼Œç©å®¶å´ä¸ºäº†å¿«ç‚¹å¬ç‰Œæ‹†äº†4ã€6ï¼Œä¸¥å‰ç—›éª‚ä»–â€œæ²¡æœ‰æ¢¦æƒ³ï¼Œè¿™ç‰Œä¹Ÿé…èƒ¡ï¼Ÿâ€ã€‚
> 2. **æ ç‰Œåˆ¤å®š (è´ªå©ªæ³•åˆ™)**ï¼šåœ¨å¡äº”æ˜Ÿä¸­ï¼Œæ ç‰Œ=ç«‹åˆ»æ‹¿é’±ã€‚å¦‚æœå¼•æ“æç¤ºæœ‰ `KONG` æœºä¼šï¼Œç©å®¶æ²¡æ è€Œæ˜¯æ‰“å‡ºå»äº†ï¼Œå˜²è®½ä»–â€œåšæ…ˆå–„â€ã€‚
> 3. **äº®å€’æ—¶æœº**ï¼šå¦‚æœæ»¡è¶³ `canLiangDao` ä½†ç©å®¶ä¸äº®ï¼ˆæˆ–è€…ä¸ºäº†é˜²å®ˆä¸äº®ï¼‰ï¼Œæ ¹æ®åœºé¢ç‰Œåˆ¤æ–­ï¼šå¦‚æœæ˜¯æ—©å·¡ï¼Œéª‚ä»–â€œæ€‚ï¼Œä¸æ•¢äº®å£â€ï¼›å¦‚æœæ˜¯æ™šå·¡ä¸”åˆ«äººå¤§ç‰Œï¼Œå¤¸ä»–â€œç®—ä½ é€ƒè¿‡ä¸€åŠ«â€ã€‚
> 4. **é€Ÿåº¦æƒ©ç½š**ï¼šå“åº”æ—¶é—´ > 5000msï¼Œå˜²ç¬‘ç©å®¶â€œæƒ³è¿™ä¹ˆä¹…ï¼Œé»„èŠ±èœéƒ½å‡‰äº†ï¼Œä½ æ˜¯æ ‘æ‡’å—â€ã€‚
>
> **åé¦ˆæ ¼å¼ï¼š**
> åŒ…å« `[è¯„åˆ†: S/A/B/C/F]` + `[ä¸€å¥è¯ç‚¹è¯„]` + `[æ·±åº¦åˆ†æ]`ã€‚
>
> **è¯­è¨€é£æ ¼çº¦æŸï¼š**
> å¹½é»˜ã€è¾›è¾£ï¼Œå¿…é¡»å¤¹æ‚æ¹–åŒ—åœ°æ–¹é»‘è¯ï¼ˆå¦‚ï¼šæ‰¯çš®ã€å†²å£³å­ã€äº®å£ã€å±èƒ¡ã€åŒ…ç‰Œã€æä¹ˆåå ‚ï¼‰ã€‚è¯·å‹¿ä½¿ç”¨å…¶ä»–åœ°åŒºçš„éº»å°†æœ¯è¯­ã€‚

---

## 5. â€œå¡äº”æ˜Ÿâ€ä¸â€œäº®å€’â€åˆ¤å®šé€»è¾‘ä»£ç  (Logic Snippet)

åœ¨ TS ä¸­åˆ¤å®šå¡äº”æ˜Ÿæ½œåŠ›å’Œå¬ç‰Œäº®å€’çš„æœ€ç®€æŠ½è±¡é€»è¾‘ï¼š

```typescript
// 1. åˆ¤æ–­æ˜¯å¦å…·å¤‡çº¯æ­£å¡äº”æ˜Ÿæ½œåŠ› (4,6 å¤¹ 5)
function checkKaWuXingPotential(hand: Tile[]): boolean {
  // åˆ†åˆ«å¯¹ç­’å­å’Œæ¡å­è¿›è¡Œåˆ¤å®š
  for (const suit of ["DOT", "BAM"] as TileType[]) {
    const suitTiles = hand.filter((t) => t.type === suit);
    const has4 = suitTiles.some((t) => t.value === 4);
    const has6 = suitTiles.some((t) => t.value === 6);
    // åªè¦æœ‰4å’Œ6çš„æ­å­ï¼Œå°±å…·å¤‡å¡äº”æ˜Ÿçš„æ½œåŠ›ï¼ˆè¿™é‡Œæ˜¯æç®€åˆ¤å®šï¼Œå®é™…éœ€ç»“åˆå‘å¬ç®—æ³•æ’é™¤ 456 + ? çš„æƒ…å†µï¼‰
    if (has4 && has6) return true;
  }
  return false;
}

// 2. åªæœ‰å‘å¬æ•°ä¸º 0 (å³å¬ç‰ŒçŠ¶æ€) æ‰å¯ä»¥æ‰§è¡Œâ€œäº®å€’â€
function checkCanLiangDao(
  shanten: number,
  isAlreadyLiangDao: boolean,
): boolean {
  return shanten === 0 && !isAlreadyLiangDao;
}
```
